<!DOCTYPE html>
<html dir="ltr" lang="en-US">
<head>
<meta charset="UTF-8" />
<title>Adventures in OpenCL Part 2: Particles with OpenGL | enj</title>
<link rel="profile" href="http://gmpg.org/xfn/11" />
<link rel="stylesheet" type="text/css" media="all" href="http://d3a9pqeyre6pa0.cloudfront.net/wp-content/themes/twentyten-child/style.css" />
<link rel="pingback" href="../../../../xmlrpc.php" />
<link rel="alternate" type="application/rss+xml" title="enj &raquo; Feed" href="../../../../enjaorg" />
<link rel="alternate" type="application/rss+xml" title="enj &raquo; Comments Feed" href="../../../../comments/feed/index.html" />
				
	<script type="text/javascript">//<![CDATA[
	// Google Analytics for WordPress by Yoast v4.2.3 | http://yoast.com/wordpress/google-analytics/
	var _gaq = _gaq || [];
	_gaq.push(['_setAccount','UA-16564388-1']);
	_gaq.push(['_trackPageview']);
	(function() {
		var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
		ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
		var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
	})();
	//]]></script>
<link rel="alternate" type="application/rss+xml" title="enj &raquo; Adventures in OpenCL Part 2: Particles with OpenGL Comments Feed" href="feed/index.html" />
<link rel='stylesheet' id='tfg_style-css'  href='../../../../wp-content/plugins/twitter-facebook-google-plusone-share/tfg_style.css%3Fver=3.3.2.css' type='text/css' media='all' />
<link rel="EditURI" type="application/rsd+xml" title="RSD" href="../../../../xmlrpc.php%3Frsd" />
<link rel="wlwmanifest" type="application/wlwmanifest+xml" href="http://enja.org/wp-includes/wlwmanifest.xml" /> 
<link rel='prev' title='Particles in BGE Update: Collisions' href='../../06/particles-in-bge-update-collisions/index.html' />
<link rel='next' title='NVIDIA GTC 2010' href='../../../09/22/nvidia-gtc-2010/index.html' />
<meta name="generator" content="WordPress 3.3.2" />
<link rel='shortlink' href='http://wp.me/pgWjI-4u' />

<!-- All in One SEO Pack 1.6.14.2 by Michael Torbert of Semper Fi Web Design[82,145] -->
<meta name="description" content="This tutorial covers how to use OpenGL and OpenCL together to share memory. Interop is demonstrated by using VBOs to make a simple particle system" />
<meta name="keywords" content="opencl, opengl, interop, vbo, particle system, tutorial, particles,advcl,code,tutorial" />
<link rel="canonical" href="index.html" />
<!-- /all in one seo pack -->


<!-- Facebook Like Thumbnail -->
<link rel="image_src" href="http://d3a9pqeyre6pa0.cloudfront.net/wp-content/uploads/2010/08/Screen-shot-2010-08-27-at-10.05.32-PM-300x233.png" />
<!-- End Facebook Like Thumbnail -->

<meta id="syntaxhighlighteranchor" name="syntaxhighlighter-version" content="3.1.3" />
</head>

<body class="single single-post postid-278 single-format-standard">
<div id="wrapper" class="hfeed">
	<div id="header">
		<div id="masthead">
			<div id="branding" role="banner">
								<div id="site-title">
					<span>
						<a href="../../../../index.html" title="enj" rel="home">enj</a>
					</span>
				</div>
				<div id="site-description">casin&#039; the joint since &#039;85</div>

										<img src="http://d3a9pqeyre6pa0.cloudfront.net/wp-content/uploads/2010/07/cropped-turtle_nom1.jpg" width="940" height="198" alt="" />
								</div><!-- #branding -->

			<div id="access" role="navigation">
			  				<div class="skip-link screen-reader-text"><a href="index.html#content" title="Skip to content">Skip to content</a></div>
								<div class="menu-header"><ul id="menu-navigation" class="menu"><li id="menu-item-319" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-home menu-item-319"><a href="../../../../index.html" >Home</a></li>
<li id="menu-item-318" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-318"><a href="../../../../about/index.html" >About</a></li>
<li id="menu-item-694" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-694"><a href="../../../../d3/index.html" >d3</a></li>
<li id="menu-item-316" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-316"><a href="../../../../blender/index.html" >Blender</a></li>
<li id="menu-item-315" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-315"><a href="../../../../opencl/index.html" >OpenCL</a></li>
<li id="menu-item-317" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-317"><a href="../../../../side-projects/index.html" >Side Projects</a></li>
</ul></div>			</div><!-- #access -->
		</div><!-- #masthead -->
	</div><!-- #header -->

	<div id="main">

		<div id="container">
			<div id="content" role="main">

			

				<div id="nav-above" class="navigation">
					<div class="nav-previous"><a href="../../06/particles-in-bge-update-collisions/index.html" rel="prev"><span class="meta-nav">&larr;</span> Particles in BGE Update: Collisions</a></div>
					<div class="nav-next"><a href="../../../09/22/nvidia-gtc-2010/index.html" rel="next">NVIDIA GTC 2010 <span class="meta-nav">&rarr;</span></a></div>
				</div><!-- #nav-above -->

				<div id="post-278" class="post-278 post type-post status-publish format-standard hentry category-advcl category-code category-opencl category-tutorial">
					<h1 class="entry-title">Adventures in OpenCL Part 2: Particles with OpenGL</h1>

					<div class="entry-meta">
						<span class="meta-prep meta-prep-author">Posted on</span> <a href="index.html" title="10:04 pm" rel="bookmark"><span class="entry-date">August 27, 2010</span></a> <span class="meta-sep">by</span> <span class="author vcard"><a class="url fn n" href="../../../../author/admin/index.html" title="View all posts by enj">enj</a></span>					</div><!-- .entry-meta -->

					<div class="entry-content">
						<div id="attachment_287" class="wp-caption alignright" style="width: 310px"><a href="http://d3a9pqeyre6pa0.cloudfront.net/wp-content/uploads/2010/08/Screen-shot-2010-08-27-at-10.05.32-PM.png" ><img class="size-medium wp-image-287 " title="20k particles advcl: part2" src="http://d3a9pqeyre6pa0.cloudfront.net/wp-content/uploads/2010/08/Screen-shot-2010-08-27-at-10.05.32-PM-300x233.png" alt="" width="300" height="233" /></a><p class="wp-caption-text">20,000 particles being shared by OpenGL and OpenCL</p></div>
<p>This tutorial series is aimed at developers trying to learn <a href="http://www.khronos.org/opencl" onclick="javascript:_gaq.push(['_trackEvent','outbound-article','http://www.khronos.org']);">OpenCL</a> from the bottom up, with a focus on practicality. This installment introduces OpenCL context sharing with OpenGL. We make a simple particle system to demonstrate this feature. One of the most important aspects of this feature is the time we can save by doing rendering and calculations on the same memory in the GPU, this means we don&#8217;t need to copy data back and forth!</p>
<p>You may want to <a href="http://github.com/enjalot/adventures_in_opencl/tree/master/part2/" onclick="javascript:_gaq.push(['_trackEvent','outbound-article','http://github.com']);">grab the code</a> and compile it to see it in action. As usual I recommend having a copy of the <a href="http://www.khronos.org/registry/cl/" onclick="javascript:_gaq.push(['_trackEvent','outbound-article','http://www.khronos.org']);">OpenCL specification</a> handy.</p>
<p>In this tutorial I use the C++ bindings with less explanation, so see <a href="../../../07/20/adventures-in-opencl-part-1-5-cpp-bindings/index.html" >Part 1.5</a> for a more in-depth explanation or <a href="../../../07/13/adventures-in-opencl-part-1-getting-started/index.html" >Part 1</a> to get started with C bindings. As before this code has been tested by me on NVIDIA hardware on my Macbook Pro and on an Ubuntu workstation, ATI and Windows users are encouraged to try it out and let me know if you have any problems so I can update the tutorial.</p>
<h2>Sharing is Caring!</h2>
<p>Lets see what we need to do to get OpenCL and OpenGL sharing their context. The first thing we need is an OpenGL context! For this tutorial I use GLUT to create a window that we can draw in, and GLEW for OpenGL extensions (at least on linux). This means you will need to have those headers and libraries installed on your system. Once you have those you can try building:</p>
<pre class="brush: bash; title: ; notranslate" title="">cd part2
mkdir build
cd build
cmake ..
make
</pre>
<h2>The Source Code Files</h2>
<p>Let&#8217;s go over the source files again, even though they are the same as the last tutorial we add more functionality in a couple of them, so it will be good to quickly go over the changes.</p>
<p><a href="http://github.com/enjalot/adventures_in_opencl/blob/master/part2/main.cpp" onclick="javascript:_gaq.push(['_trackEvent','outbound-article','http://github.com']);">main.cpp</a><br />
This is where we test out our CL class. We setup a GLUT window and OpenGL context. Then we instantiate our CL class, prepare a simple particle system and initialize it. At the end of the file are several helper functions for manipulating the OpenGL view with the mouse and keyboard.</p>
<p><a href="http://github.com/enjalot/adventures_in_opencl/blob/master/part2/cll.h" onclick="javascript:_gaq.push(['_trackEvent','outbound-article','http://github.com']);">cll.h</a><br />
The main header file for our CL class definition, also handles including the OpenCL libraries. I&#8217;ve downloaded the header files from the <a href="http://khronos.org/registry/cl" onclick="javascript:_gaq.push(['_trackEvent','outbound-article','http://khronos.org']);">Khronos website</a> to avoid having to search the computer for a particular SDK. Note that I&#8217;ve had to make a slight change to cl.hpp for Mac users because of a bug in the implementation, which I will cover later.</p>
<p><a href="http://github.com/enjalot/adventures_in_opencl/blob/master/part2/cll.cpp" onclick="javascript:_gaq.push(['_trackEvent','outbound-article','http://github.com']);">cll.cpp</a><br />
The core implementation of our CL class, including functions for initializing the OpenCL context from OpenGL, loading and building an OpenCL program.</p>
<p><a href="http://github.com/enjalot/adventures_in_opencl/blob/master/part2/part2.cpp" onclick="javascript:_gaq.push(['_trackEvent','outbound-article','http://github.com']);">part2.cpp</a><br />
Implementation of the functions that setup and run the OpenCL kernel. This is where we actually see OpenCL in action.</p>
<p><a href="http://github.com/enjalot/adventures_in_opencl/blob/master/part2/part2.cl" onclick="javascript:_gaq.push(['_trackEvent','outbound-article','http://github.com']);">part2.cl</a><br />
The actual OpenCL code to be executed. Right now it&#8217;s a simple particle system that models gravity.</p>
<p><a href="http://github.com/enjalot/adventures_in_opencl/blob/master/part2/util.h" onclick="javascript:_gaq.push(['_trackEvent','outbound-article','http://github.com']);">util.h</a> and <a href="http://github.com/enjalot/adventures_in_opencl/blob/master/part2/util.cpp" onclick="javascript:_gaq.push(['_trackEvent','outbound-article','http://github.com']);">util.cpp</a><br />
Utility functions that make things like creating VBOs or printing out OpenCL error messages easier</p>
<p><a href="http://github.com/enjalot/adventures_in_opencl/blob/master/part2/CMakeLists.txt" onclick="javascript:_gaq.push(['_trackEvent','outbound-article','http://github.com']);">CMakeLists.txt</a><br />
The configuration and build script used to build the project. This makes it easier to be portable, and building our code as a library makes it easier to contribute to other projects.</p>
<h2>The Source Code Contents</h2>
<p>So our <a href="http://github.com/enjalot/adventures_in_opencl/blob/master/part2/main.cpp" onclick="javascript:_gaq.push(['_trackEvent','outbound-article','http://github.com']);">main.cpp</a> is a bit messier than before, this is mostly just setting up the OpenGL stuff. You may already have some OpenGL context to plug your OpenCL stuff into, in which case you just want to make sure you are using Vertex Buffer Objects (<a href="http://www.songho.ca/opengl/gl_vbo.html" onclick="javascript:_gaq.push(['_trackEvent','outbound-article','http://www.songho.ca']);">VBOs</a>) that OpenCL can use to create its buffers.<br />
I will just point out some interesting bits that are important to OpenCL, starting with the number of particles and a pointer to our CL class:</p>
<pre class="brush: cpp; title: ; notranslate" title="">
#define NUM_PARTICLES 10000
CL* example;
</pre>
<p>and later we instantiate it like:</p>
<pre class="brush: cpp; title: ; notranslate" title=""> example = new CL();</pre>
<p>We do this so that we can access the object from the GLUT loop, specifically in the appRender function which is called by GLUT to update the display. Before we can talk about rendering though, we need to load some data! Take a look at the for loop where we populate three vectors of <span class="simple_code">Vec4</span> which is just a typedef for 4 floats; x, y, z, w, declared in <a href="http://github.com/enjalot/adventures_in_opencl/blob/master/part2/cll.h" onclick="javascript:_gaq.push(['_trackEvent','outbound-article','http://github.com']);">cll.h</a>. We then pass these to our class which will push the data to the GPU.</p>
<pre class="brush: cpp; title: ; notranslate" title="">
example-&gt;loadData(pos, vel, color);
example-&gt;popCorn();
</pre>
<p>Lastly in main.cpp let&#8217;s take a look at the <span class="simple_code">void appRender()</span> function, where the first thing we do is update the particle system:</p>
<pre class="brush: cpp; title: ; notranslate" title="">example-&gt;runKernel();</pre>
<p>This is followed by the rendering code, which is standard OpenGL for drawing points from a VBO. I learned this from <a href="http://www.songho.ca/opengl/gl_vbo.html" onclick="javascript:_gaq.push(['_trackEvent','outbound-article','http://www.songho.ca']);">here</a>.</p>
<p>Now let&#8217;s took at some changes to <a href="http://github.com/enjalot/adventures_in_opencl/blob/master/part2/cll.cpp" onclick="javascript:_gaq.push(['_trackEvent','outbound-article','http://github.com']);">cll.cpp</a>.<br />
It is easier to just click the link and view the whole source file, since the code is too long for a snippet here, but the major addition is the way we ceate the context. Each operating system uses different extensions to accomplish the same thing, the code mostly comes from the NVIDIA GPU SDK examples, but I modified it to use the C++ bindings. In doing so I found an inconsistency in Apple&#8217;s implementation and had to add an extra constructor to the Context class in <a href="http://github.com/enjalot/adventures_in_opencl/blob/master/opencl10/CL/cl.hpp" onclick="javascript:_gaq.push(['_trackEvent','outbound-article','http://github.com']);">cl.hpp</a> (around line 1448) to compensate.</p>
<p>We see the most OpenCL action in <a href="http://github.com/enjalot/adventures_in_opencl/blob/master/part2/part2.cpp" onclick="javascript:_gaq.push(['_trackEvent','outbound-article','http://github.com']);">part2.cpp</a> which also demonstrates creating a CL buffer from a GL buffer. First we create the GL buffer as a VBO</p>
<pre class="brush: cpp; title: ; notranslate" title="">p_vbo = createVBO(&amp;pos[0], array_size, GL_ARRAY_BUFFER, GL_DYNAMIC_DRAW);</pre>
<p>The nice thing about <span class="simple_code&quot;">std::vector</span>s is that they store their elements in a tightly packed array so we can just pass the address of the first element. Next we store our vbos in another vector as <span class="simple_code">cl::BufferGL</span> objects:</p>
<pre class="brush: cpp; title: ; notranslate" title="">cl_vbos.push_back(cl::BufferGL(context, CL_MEM_READ_WRITE, p_vbo, &amp;err));</pre>
<p>We don&#8217;t need to push any data to them like we do our pure OpenCL buffers because they just reference the data that is already in the VBO!</p>
<p>Our popCorn function just loads the kernel like before, and sets its arguments. Finally in the runKernel function we have to do a couple extra things to work with our VBOs, namely</p>
<pre class="brush: cpp; title: ; notranslate" title="">err = queue.enqueueAcquireGLObjects(&amp;cl_vbos, NULL, &amp;event);</pre>
<p>and</p>
<pre class="brush: cpp; title: ; notranslate" title="">err = queue.enqueueReleaseGLObjects(&amp;cl_vbos, NULL, &amp;event);</pre>
<p>Which acquires the buffers before we execute the kernel, and then releases them when we are done. This way we can safely work on the data without interfering with OpenGL or it interfering with our OpenCL.</p>
<p>The last thing to talk about is the cl code itself, but I&#8217;ve heavily commented the code so it will be easier to just go <a href="http://github.com/enjalot/adventures_in_opencl/blob/master/part2/part2.cl" onclick="javascript:_gaq.push(['_trackEvent','outbound-article','http://github.com']);">read the file</a> :)</p>
<p>I hope this tutorial helps, please let me know if I&#8217;m mistaken anywhere so I can correct it for others reading! I&#8217;m learning a lot about <a href="../../06/particles-in-bge-update-collisions/index.html" >particle systems</a> for my master&#8217;s thesis at the <a href="http://www.facebook.com/FSUSciComp" onclick="javascript:_gaq.push(['_trackEvent','outbound-article','http://www.facebook.com']);">Florida State University Department of Scientific Computing</a>!</p>
<div class="bottomcontainerBox" style="background-color:#FFFFFF;">
			<div style="float:left; width:85px;padding-right:10px; margin:4px 4px 4px 4px;height:30px;">
			<iframe src="http://www.facebook.com/plugins/like.php?href=http%3A%2F%2Fenja.org%2F2010%2F08%2F27%2Fadventures-in-opencl-part-2-particles-with-opengl%2F&amp;layout=button_count&amp;show_faces=false&amp;width=85&amp;action=like&amp;font=verdana&amp;colorscheme=light&amp;height=21" scrolling="no" frameborder="0" allowTransparency="true" style="border:none; overflow:hidden; width:85px; height:21px;"></iframe></div>
			<div style="float:left; width:80px;padding-right:10px; margin:4px 4px 4px 4px;height:30px;">
			<g:plusone size="medium" href="http://enja.org/2010/08/27/adventures-in-opencl-part-2-particles-with-opengl/"></g:plusone>
			</div>
			<div style="float:left; width:95px;padding-right:10px; margin:4px 4px 4px 4px;height:30px;">
			<a href="http://twitter.com/share" onclick="javascript:_gaq.push(['_trackEvent','outbound-article','http://twitter.com']);" class="twitter-share-button" data-url="http://enja.org/2010/08/27/adventures-in-opencl-part-2-particles-with-opengl/"  data-text="Adventures in OpenCL Part 2: Particles with OpenGL" data-count="horizontal" data-via="enjalot"></a>
			</div>			
			</div><div style="clear:both"></div><div style="padding-bottom:4px;"></div>											</div><!-- .entry-content -->


					<div class="entry-utility">
						This entry was posted in <a href="../../../../category/tutorial/advcl/index.html" title="View all posts in advcl" rel="category tag">advcl</a>, <a href="../../../../category/code/index.html" title="View all posts in code" rel="category tag">code</a>, <a href="../../../../category/opencl/index.html" title="View all posts in opencl" rel="category tag">opencl</a>, <a href="../../../../category/tutorial/index.html" title="View all posts in tutorial" rel="category tag">tutorial</a>. Bookmark the <a href="index.html" title="Permalink to Adventures in OpenCL Part 2: Particles with OpenGL" rel="bookmark">permalink</a>.											</div><!-- .entry-utility -->
				</div><!-- #post-## -->

				<div id="nav-below" class="navigation">
					<div class="nav-previous"><a href="../../06/particles-in-bge-update-collisions/index.html" rel="prev"><span class="meta-nav">&larr;</span> Particles in BGE Update: Collisions</a></div>
					<div class="nav-next"><a href="../../../09/22/nvidia-gtc-2010/index.html" rel="next">NVIDIA GTC 2010 <span class="meta-nav">&rarr;</span></a></div>
				</div><!-- #nav-below -->

				
			<div id="comments">


			<h3 id="comments-title">12 Responses to <em>Adventures in OpenCL Part 2: Particles with OpenGL</em></h3>


			<ol class="commentlist">
					<li class="post pingback">
		<p>Pingback: <a href="http://topsy.com/enja.org/2010/08/27/adventures-in-opencl-part-2-particles-with-opengl/?utm_source=pingback&#038;utm_campaign=L2" onclick="javascript:_gaq.push(['_trackEvent','outbound-commentauthor','http://topsy.com']);"  rel='external nofollow' class='url'>Tweets that mention Adventures in OpenCL Part 2: Particles with OpenGL | enj -- Topsy.com</a></p>
	</li>
	<li class="post pingback">
		<p>Pingback: <a href="http://www.geeks3d.com/20100830/gpu-computing-particle-systems-with-opencl-and-cuda/" onclick="javascript:_gaq.push(['_trackEvent','outbound-commentauthor','http://www.geeks3d.com']);"  rel='external nofollow' class='url'>[GPU Computing] Particle Systems with OpenCL and CUDA - 3D Tech News, Pixel Hacking, Data Visualization and 3D Programming - Geeks3D.com</a></p>
	</li>
	<li class="comment even thread-even depth-1" id="li-comment-266">
		<div id="comment-266">
		<div class="comment-author vcard">
			<img alt='' src='http://1.gravatar.com/avatar/f509f2ab127d35e2b94473463dde6134?s=40&amp;d=http%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />			<cite class="fn">blenderificus</cite> <span class="says">says:</span>		</div><!-- .comment-author .vcard -->
		
		<div class="comment-meta commentmetadata"><a href="comment-page-1/index.html#comment-266">
			August 30, 2010 at 5:40 am</a>		</div><!-- .comment-meta .commentmetadata -->

		<div class="comment-body"><p>thanks for sharing more insigt into programming particles for openCL.  Cant wait for your work to make in into trunk!</p>
</div>

		<div class="reply">
					</div><!-- .reply -->
	</div><!-- #comment-##  -->

	</li>
	<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-286">
		<div id="comment-286">
		<div class="comment-author vcard">
			<img alt='' src='http://0.gravatar.com/avatar/ea90b69b881ab93ce590f3534d091d60?s=40&amp;d=http%3A%2F%2F0.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />			<cite class="fn">Patrick A.</cite> <span class="says">says:</span>		</div><!-- .comment-author .vcard -->
		
		<div class="comment-meta commentmetadata"><a href="comment-page-1/index.html#comment-286">
			September 10, 2010 at 5:55 pm</a>		</div><!-- .comment-meta .commentmetadata -->

		<div class="comment-body"><p>Really great tutorial! I&#8217;m trying to compile your source code under Netbeans 6.9.1 for Windows 7 but it seems that the file GL/glx.h is missing. What is this file used for? Also, which libraries are you linking your GLUT and OpenGL things to, as I am failing to link the source code to the standard libraries (Glew32.lib, Glu32.lib, OpenGL32.lib and Glut32.lib)&#8230;<br />
Thanks,</p>
</div>

		<div class="reply">
					</div><!-- .reply -->
	</div><!-- #comment-##  -->

	</li>
	<li class="comment byuser comment-author-admin bypostauthor even thread-even depth-1" id="li-comment-291">
		<div id="comment-291">
		<div class="comment-author vcard">
			<img alt='' src='http://0.gravatar.com/avatar/89db4f3e0cfa7752306bede98888b898?s=40&amp;d=http%3A%2F%2F0.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />			<cite class="fn"><a href="../../../../index.html"   rel='external nofollow' class='url'>enj</a></cite> <span class="says">says:</span>		</div><!-- .comment-author .vcard -->
		
		<div class="comment-meta commentmetadata"><a href="comment-page-1/index.html#comment-291">
			September 14, 2010 at 6:19 pm</a>		</div><!-- .comment-meta .commentmetadata -->

		<div class="comment-body"><p>@Patrick,<br />
Thanks for the feedback, unfortunately I don&#8217;t have a Windows machine handy to test with, but I did check and glx.h is not necessary on Windows (this pertains to functions on linux to get the OpenGL context).<br />
You should be able to link to those standard OpenGL libraries, is NetBeans using the CMakeLists.txt file or does it have its own build system?</p>
<p>At some point I&#8217;ll be testing everything on Windows, but right now my time is focused on my thesis project (which is where the knowledge for these tutorials comes from) so unfortunately I can&#8217;t help just yet.</p>
</div>

		<div class="reply">
					</div><!-- .reply -->
	</div><!-- #comment-##  -->

	</li>
	<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-386">
		<div id="comment-386">
		<div class="comment-author vcard">
			<img alt='' src='http://1.gravatar.com/avatar/35b54b1298c576380613a5c8325dcad3?s=40&amp;d=http%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />			<cite class="fn">Calin</cite> <span class="says">says:</span>		</div><!-- .comment-author .vcard -->
		
		<div class="comment-meta commentmetadata"><a href="comment-page-1/index.html#comment-386">
			November 24, 2010 at 4:46 am</a>		</div><!-- .comment-meta .commentmetadata -->

		<div class="comment-body"><p>Thanks for sharing your knowledge. Great tutorial.<br />
I tested it on Ubuntu 10.04 with ATI 4650, StreamSdk 2.2 and it perfectly works.</p>
</div>

		<div class="reply">
					</div><!-- .reply -->
	</div><!-- #comment-##  -->

	</li>
	<li class="comment even thread-even depth-1" id="li-comment-549">
		<div id="comment-549">
		<div class="comment-author vcard">
			<img alt='' src='http://0.gravatar.com/avatar/0ab96a854996f4ea87bc46b65360e53e?s=40&amp;d=http%3A%2F%2F0.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />			<cite class="fn">Garet</cite> <span class="says">says:</span>		</div><!-- .comment-author .vcard -->
		
		<div class="comment-meta commentmetadata"><a href="comment-page-1/index.html#comment-549">
			December 28, 2010 at 5:49 am</a>		</div><!-- .comment-meta .commentmetadata -->

		<div class="comment-body"><p>Got it up and running in Code::Blocks on Windows 7 x64 with MinGW</p>
<p>Thanks much =D Will be very helpful in conceptualizin&#8217; opencl</p>
</div>

		<div class="reply">
					</div><!-- .reply -->
	</div><!-- #comment-##  -->

	</li>
	<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-551">
		<div id="comment-551">
		<div class="comment-author vcard">
			<img alt='' src='http://0.gravatar.com/avatar/0ab96a854996f4ea87bc46b65360e53e?s=40&amp;d=http%3A%2F%2F0.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />			<cite class="fn"><a href="http://====Moderator,pleaseusethiscopyofthepost--othercopyhasbadhtmlbusiness====" onclick="javascript:_gaq.push(['_trackEvent','outbound-commentauthor','http://====Moderator,pleaseusethiscopyofthepost--othercopyhasbadhtmlbusiness====']);"  rel='external nofollow' class='url'>Garet</a></cite> <span class="says">says:</span>		</div><!-- .comment-author .vcard -->
		
		<div class="comment-meta commentmetadata"><a href="comment-page-1/index.html#comment-551">
			December 28, 2010 at 6:04 am</a>		</div><!-- .comment-meta .commentmetadata -->

		<div class="comment-body"><p>oh btw, i linked to:<br />
libopengl32.a<br />
libglu32.a<br />
libfreeglut.a<br />
OpenCL.lib</p>
<p>in that order</p>
<p>also i changed the top of part2.cpp to look like:</p>
<p>#define GLUT_DISABLE_ATEXIT_HACK<br />
#define GLEW_STATIC</p>
<p>#include &lt;windows.h&gt;<br />
//OpenGL stuff<br />
#include &lt;glew.c&gt;<br />
#if defined __APPLE__ || defined(MACOSX)<br />
    #include &lt;GLUT/glut.h&gt;<br />
#else<br />
    #include &lt;GL/glut.h&gt;<br />
#endif<br />
#include &lt;GL/gl.h&gt;<br />
#include &lt;stdio.h&gt;<br />
#include &lt;stdlib.h&gt;<br />
#include &lt;cstdlib&gt;<br />
#include &lt;sstream&gt;<br />
#include &lt;iomanip&gt;<br />
#include &lt;math.h&gt;<br />
#include &lt;vector&gt;<br />
#include &quot;cll.h&quot;<br />
#include &quot;util.h&quot;<br />
#include &lt;string&gt;<br />
#include &lt;string.h&gt;</p>
<p>and i removed any place i saw includes being recalled that i could find based on that order.</p>
<p>the top of main.cpp just looks like:<br />
#include &quot;part2.cpp&quot;</p>
<p>#define NUM_PARTICLES 20000<br />
CL* example; </p>
<p>etc,&#8230;</p>
<p>and maybe the more important thing with glew is that i just went ahead and cheated and plopped the glew.c file into mingw/include and glew.h into mingw/include/GL<br />
and then just #include&lt;glew.c&gt; to avoid some strange link errors ^_^;;</p>
<p>glew.h should be at top of glew.c ala<br />
#include &lt;GL/glew.h&gt;<br />
#if defined(_WIN32)<br />
#  include &lt;GL/wglew.h&gt;<br />
#elif !defined(__APPLE__) || defined(GLEW_APPLE_GLX)<br />
#  include &lt;GL/glxew.h&gt;<br />
#endif</p>
<p>which i think should shed some light on that glx business.. prolly related to GLEW_APPLE_GLX</p>
</div>

		<div class="reply">
					</div><!-- .reply -->
	</div><!-- #comment-##  -->

	</li>
	<li class="comment even thread-even depth-1" id="li-comment-589">
		<div id="comment-589">
		<div class="comment-author vcard">
			<img alt='' src='http://0.gravatar.com/avatar/6f123740b8cc479c75fa849d21452243?s=40&amp;d=http%3A%2F%2F0.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />			<cite class="fn">Keith</cite> <span class="says">says:</span>		</div><!-- .comment-author .vcard -->
		
		<div class="comment-meta commentmetadata"><a href="comment-page-1/index.html#comment-589">
			January 12, 2011 at 5:47 am</a>		</div><!-- .comment-meta .commentmetadata -->

		<div class="comment-body"><p>Nice tutorials so far.  Have you considered getting into PyOpenCL?</p>
</div>

		<div class="reply">
					</div><!-- .reply -->
	</div><!-- #comment-##  -->

	</li>
	<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-592">
		<div id="comment-592">
		<div class="comment-author vcard">
			<img alt='' src='http://1.gravatar.com/avatar/50a9fc7a2606118a0b3b09193d6948b0?s=40&amp;d=http%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />			<cite class="fn">karimkhan</cite> <span class="says">says:</span>		</div><!-- .comment-author .vcard -->
		
		<div class="comment-meta commentmetadata"><a href="comment-page-1/index.html#comment-592">
			January 13, 2011 at 4:05 am</a>		</div><!-- .comment-meta .commentmetadata -->

		<div class="comment-body"><p>Hi everybody ,<br />
I tried to run the part2.x  , but  its giving segmenation fault , what should I do ca anyone suggest ,<br />
enja I hope you will do it&#8230;</p>
<p>Thanks&#8230;</p>
</div>

		<div class="reply">
					</div><!-- .reply -->
	</div><!-- #comment-##  -->

	</li>
	<li class="post pingback">
		<p>Pingback: <a href="../../../../2011/03/22/adventures-in-pyopencl-part-2-particles-with-pyopengl/index.html"   rel='external nofollow' class='url'>Adventures in PyOpenCL: Part 2, Particles with PyOpenGL | enj</a></p>
	</li>
	<li class="comment even thread-even depth-1" id="li-comment-1474">
		<div id="comment-1474">
		<div class="comment-author vcard">
			<img alt='' src='http://0.gravatar.com/avatar/05e2f6a24bc01cbfdb77b46851580437?s=40&amp;d=http%3A%2F%2F0.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />			<cite class="fn">Eustachy</cite> <span class="says">says:</span>		</div><!-- .comment-author .vcard -->
		
		<div class="comment-meta commentmetadata"><a href="comment-page-1/index.html#comment-1474">
			November 22, 2011 at 4:11 am</a>		</div><!-- .comment-meta .commentmetadata -->

		<div class="comment-body"><p>In my application, I had a problem creating shared context under Mac OS X (10.6.8) with CL_INVALID_GL_OBJECT error returned by clCreateFromGLBuffer(). Your example failed to run for the same reason. Turns out it works fine if you create VBO with GL_STATIC_DRAW instead of GL_DYNAMIC_DRAW. Not sure what is the reason, but it seems there is one, because the <a href="http://developer.apple.com/library/mac/#samplecode/OpenCL_Procedural_Geometric_Displacement_Example/Introduction/Intro.html#//apple_ref/doc/uid/DTS40008192" onclick="javascript:_gaq.push(['_trackEvent','outbound-comment','http://developer.apple.com']);" rel="nofollow"> example </a> I found on developer.apple.com explicitly defines this param as STATIC_DRAW if gl interop is enabled (and uses DYNAMIC_DRAW when gl interop is disabled).</p>
</div>

		<div class="reply">
					</div><!-- .reply -->
	</div><!-- #comment-##  -->

	</li>
			</ol>



								
</div><!-- #comments -->


			</div><!-- #content -->
		</div><!-- #container -->


		<div id="primary" class="widget-area" role="complementary">
			<ul class="xoxo">

<li id="search-3" class="widget-container widget_search"><form role="search" method="get" id="searchform" action="../../../../index.html" >
	<div><label class="screen-reader-text" for="s">Search for:</label>
	<input type="text" value="" name="s" id="s" />
	<input type="submit" id="searchsubmit" value="Search" />
	</div>
	</form></li><li id="nav_menu-3" class="widget-container widget_nav_menu"><div class="menu-navigation-container"><ul id="menu-navigation-1" class="menu"><li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-home menu-item-319"><a href="../../../../index.html" >Home</a></li>
<li class="menu-item menu-item-type-post_type menu-item-object-page menu-item-318"><a href="../../../../about/index.html" >About</a></li>
<li class="menu-item menu-item-type-post_type menu-item-object-page menu-item-694"><a href="../../../../d3/index.html" >d3</a></li>
<li class="menu-item menu-item-type-post_type menu-item-object-page menu-item-316"><a href="../../../../blender/index.html" >Blender</a></li>
<li class="menu-item menu-item-type-post_type menu-item-object-page menu-item-315"><a href="../../../../opencl/index.html" >OpenCL</a></li>
<li class="menu-item menu-item-type-post_type menu-item-object-page menu-item-317"><a href="../../../../side-projects/index.html" >Side Projects</a></li>
</ul></div></li><li id="text-4" class="widget-container widget_text">			<div class="textwidget"><a href="https://twitter.com/#!/enjalot" onclick="javascript:_gaq.push(['_trackEvent','outbound-widget','http://twitter.com']);"><img src="https://s2.googleusercontent.com/s2/favicons?alt=p&domain=twitter.com"> @enjalot</a>
<br/>
<a href="https://plus.google.com/112153365286725889851/posts" onclick="javascript:_gaq.push(['_trackEvent','outbound-widget','http://plus.google.com']);"><img src="https://s2.googleusercontent.com/s2/favicons?alt=p&domain=plus.google.com"> +Ian Johnson</a></div>
		</li><li id="categories-414549122" class="widget-container widget_categories"><h3 class="widget-title">Categories</h3>		<ul>
	<li class="cat-item cat-item-25"><a href="../../../../category/tutorial/advcl/index.html" title="Adventures in OpenCL">advcl</a>
</li>
	<li class="cat-item cat-item-32"><a href="../../../../category/tutorial/advd3-tutorial/index.html" title="View all posts filed under advd3">advd3</a>
</li>
	<li class="cat-item cat-item-23"><a href="../../../../category/android/index.html" title="View all posts filed under android">android</a>
</li>
	<li class="cat-item cat-item-20"><a href="../../../../category/blender/index.html" title="View all posts filed under blender">blender</a>
</li>
	<li class="cat-item cat-item-3"><a href="../../../../category/code/index.html" title="View all posts filed under code">code</a>
</li>
	<li class="cat-item cat-item-4"><a href="../../../../category/community/index.html" title="View all posts filed under community">community</a>
</li>
	<li class="cat-item cat-item-5"><a href="../../../../category/culture/index.html" title="View all posts filed under culture">culture</a>
</li>
	<li class="cat-item cat-item-33"><a href="../../../../category/d3/index.html" title="View all posts filed under d3">d3</a>
</li>
	<li class="cat-item cat-item-6"><a href="../../../../category/life/index.html" title="View all posts filed under life">life</a>
</li>
	<li class="cat-item cat-item-28"><a href="../../../../category/math/index.html" title="View all posts filed under math">math</a>
</li>
	<li class="cat-item cat-item-7"><a href="../../../../category/misc/index.html" title="View all posts filed under misc">misc</a>
</li>
	<li class="cat-item cat-item-8"><a href="../../../../category/music/index.html" title="View all posts filed under music">music</a>
</li>
	<li class="cat-item cat-item-9"><a href="../../../../category/news/index.html" title="View all posts filed under news">news</a>
</li>
	<li class="cat-item cat-item-21"><a href="../../../../category/opencl/index.html" title="View all posts filed under opencl">opencl</a>
</li>
	<li class="cat-item cat-item-30"><a href="../../../../category/processingjs/index.html" title="View all posts filed under processingjs">processingjs</a>
</li>
	<li class="cat-item cat-item-29"><a href="../../../../category/python/index.html" title="View all posts filed under python">python</a>
</li>
	<li class="cat-item cat-item-10"><a href="../../../../category/race/index.html" title="View all posts filed under race">race</a>
</li>
	<li class="cat-item cat-item-11"><a href="../../../../category/school/index.html" title="View all posts filed under school">school</a>
</li>
	<li class="cat-item cat-item-12"><a href="../../../../category/tech/index.html" title="View all posts filed under tech">tech</a>
</li>
	<li class="cat-item cat-item-13"><a href="../../../../category/travel/index.html" title="View all posts filed under travel">travel</a>
</li>
	<li class="cat-item cat-item-24"><a href="../../../../category/tutorial/index.html" title="View all posts filed under tutorial">tutorial</a>
</li>
	<li class="cat-item cat-item-1"><a href="../../../../category/uncategorized/index.html" title="View all posts filed under Uncategorized">Uncategorized</a>
</li>
	<li class="cat-item cat-item-14"><a href="../../../../category/wtf/index.html" title="View all posts filed under wtf">wtf</a>
</li>
	<li class="cat-item cat-item-15"><a href="../../../../category/ä¸­æ%2596%2587/index.html" title="View all posts filed under ä¸­æ–‡">ä¸­æ–‡</a>
</li>
		</ul>
</li>			</ul>
		</div><!-- #primary .widget-area -->

	</div><!-- #main -->

	<div id="footer" role="contentinfo">
		<div id="colophon">



			<div id="site-info">
				<a href="../../../../index.html" title="enj" rel="home">
					enj				</a>
			</div><!-- #site-info -->

			<div id="site-generator">
								<a href="http://wordpress.org/" title="Semantic Personal Publishing Platform" rel="generator">Proudly powered by WordPress.</a>
			</div><!-- #site-generator -->

		</div><!-- #colophon -->
	</div><!-- #footer -->

</div><!-- #wrapper -->

<script type='text/javascript' src='http://d3a9pqeyre6pa0.cloudfront.net/wp-includes/js/jquery/jquery.js?ver=1.7.1'></script>
<script type='text/javascript' src='http://s.gravatar.com/js/gprofiles.js?aa&#038;ver=3.3.2'></script>
<script type='text/javascript'>
/* <![CDATA[ */
var WPGroHo = {"my_hash":""};
/* ]]> */
</script>
<script type='text/javascript' src='../../../../wp-content/plugins/jetpack/modules/wpgroho.js%3Fver=3.3.2'></script>
	<div style="display:none">
	<div class="grofile-hash-map-f509f2ab127d35e2b94473463dde6134">
	</div>
	<div class="grofile-hash-map-ea90b69b881ab93ce590f3534d091d60">
	</div>
	<div class="grofile-hash-map-89db4f3e0cfa7752306bede98888b898">
	</div>
	<div class="grofile-hash-map-35b54b1298c576380613a5c8325dcad3">
	</div>
	<div class="grofile-hash-map-0ab96a854996f4ea87bc46b65360e53e">
	</div>
	<div class="grofile-hash-map-6f123740b8cc479c75fa849d21452243">
	</div>
	<div class="grofile-hash-map-50a9fc7a2606118a0b3b09193d6948b0">
	</div>
	<div class="grofile-hash-map-05e2f6a24bc01cbfdb77b46851580437">
	</div>
	</div>
<script type='text/javascript' src='../../../../wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/scripts/shCore.js%3Fver=3.0.83c'></script>
<script type='text/javascript' src='../../../../wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/scripts/shBrushBash.js%3Fver=3.0.83c'></script>
<script type='text/javascript' src='../../../../wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/scripts/shBrushCpp.js%3Fver=3.0.83c'></script>
<script type='text/javascript'>
	(function(){
		var corecss = document.createElement('link');
		var themecss = document.createElement('link');
		var corecssurl = "http://enja.org/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/styles/shCore.css?ver=3.0.83c";
		if ( corecss.setAttribute ) {
				corecss.setAttribute( "rel", "stylesheet" );
				corecss.setAttribute( "type", "text/css" );
				corecss.setAttribute( "href", corecssurl );
		} else {
				corecss.rel = "stylesheet";
				corecss.href = corecssurl;
		}
		document.getElementsByTagName("head")[0].insertBefore( corecss, document.getElementById("syntaxhighlighteranchor") );
		var themecssurl = "http://enja.org/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/styles/shThemeDefault.css?ver=3.0.83c";
		if ( themecss.setAttribute ) {
				themecss.setAttribute( "rel", "stylesheet" );
				themecss.setAttribute( "type", "text/css" );
				themecss.setAttribute( "href", themecssurl );
		} else {
				themecss.rel = "stylesheet";
				themecss.href = themecssurl;
		}
		//document.getElementById("syntaxhighlighteranchor").appendChild(themecss);
		document.getElementsByTagName("head")[0].insertBefore( themecss, document.getElementById("syntaxhighlighteranchor") );
	})();
	SyntaxHighlighter.config.strings.expandSource = '+ expand source';
	SyntaxHighlighter.config.strings.help = '?';
	SyntaxHighlighter.config.strings.alert = 'SyntaxHighlighter\n\n';
	SyntaxHighlighter.config.strings.noBrush = 'Can\'t find brush for: ';
	SyntaxHighlighter.config.strings.brushNotHtmlScript = 'Brush wasn\'t configured for html-script option: ';
	SyntaxHighlighter.defaults['gutter'] = false;
	SyntaxHighlighter.defaults['pad-line-numbers'] = true;
	SyntaxHighlighter.all();
</script>
<script type='text/javascript' src='http://platform.twitter.com/widgets.js?ver=3.3.2'></script>
<script type='text/javascript' src='http://apis.google.com/js/plusone.js?ver=3.3.2'></script>

	<script src="http://stats.wordpress.com/e-201219.js" type="text/javascript"></script>
	<script type="text/javascript">
	st_go({v:'ext',j:'1:1.3',blog:'4037422',post:'278'});
	var load_cmc = function(){linktracker_init(4037422,278,2);};
	if ( typeof addLoadEvent != 'undefined' ) addLoadEvent(load_cmc);
	else load_cmc();
	</script></body>
</html>

<!-- Performance optimized by W3 Total Cache. Learn more: http://www.w3-edge.com/wordpress-plugins/

Minified using disk: basic
Page Caching using disk: basic
Database Caching using disk: basic
Object Caching 1419/1536 objects using disk: basic
Content Delivery Network via Amazon Web Services: CloudFront: d3a9pqeyre6pa0.cloudfront.net

Served from: enja.org @ 2012-05-13 17:42:41 -->